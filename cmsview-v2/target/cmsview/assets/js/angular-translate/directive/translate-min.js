angular.module("pascalprecht.translate").directive("translate",translateDirective);function translateDirective(e,f,c,d,b){var a=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:true,priority:e.directivePriority(),compile:function(k,h){var j=(h.translateValues)?h.translateValues:undefined;var l=(h.translateInterpolation)?h.translateInterpolation:undefined;var g=k[0].outerHTML.match(/translate-value-+/i);var n="^(.*)("+f.startSymbol()+".*"+f.endSymbol()+")(.*)",i="^(.*)"+f.startSymbol()+"(.*)"+f.endSymbol()+"(.*)";return function m(B,o,x){B.interpolateParams={};B.preText="";B.postText="";B.translateNamespace=getTranslateNamespace(B);var t={};var u=function(H,F,E){if(F.translateValues){angular.extend(H,d(F.translateValues)(B.$parent))}if(g){for(var D in E){if(Object.prototype.hasOwnProperty.call(F,D)&&D.substr(0,14)==="translateValue"&&D!=="translateValues"){var G=angular.lowercase(D.substr(14,1))+D.substr(15);H[G]=E[D]}}}};var C=function(E){if(angular.isFunction(C._unwatchOld)){C._unwatchOld();C._unwatchOld=undefined}if(angular.equals(E,"")||!angular.isDefined(E)){var F=a.apply(o.text());var D=F.match(n);if(angular.isArray(D)){B.preText=D[1];B.postText=D[3];t.translate=f(D[2])(B.$parent);var G=F.match(i);if(angular.isArray(G)&&G[2]&&G[2].length){C._unwatchOld=B.$watch(G[2],function(H){t.translate=H;y()})}}else{t.translate=!F?undefined:F}}else{t.translate=E}y()};var v=function(D){x.$observe(D,function(E){t[D]=E;y()})};u(B.interpolateParams,x,h);var p=true;x.$observe("translate",function(D){if(typeof D==="undefined"){C("")}else{if(D!==""||!p){t.translate=D;y()}}p=false});for(var z in x){if(x.hasOwnProperty(z)&&z.substr(0,13)==="translateAttr"&&z.length>13){v(z)}}x.$observe("translateDefault",function(D){B.defaultText=D;y()});if(j){x.$observe("translateValues",function(D){if(D){B.$parent.$watch(function(){angular.extend(B.interpolateParams,d(D)(B.$parent))})}})}if(g){var w=function(D){x.$observe(D,function(F){var E=angular.lowercase(D.substr(14,1))+D.substr(15);B.interpolateParams[E]=F})};for(var s in x){if(Object.prototype.hasOwnProperty.call(x,s)&&s.substr(0,14)==="translateValue"&&s!=="translateValues"){w(s)}}}var y=function(){for(var D in t){if(t.hasOwnProperty(D)&&t[D]!==undefined){q(D,t[D],B,B.interpolateParams,B.defaultText,B.translateNamespace)}}};var q=function(G,D,F,E,I,H){if(D){if(H&&D.charAt(0)==="."){D=H+D}e(D,E,l,I,F.translateLanguage).then(function(J){r(J,F,true,G)},function(J){r(J,F,false,G)})}else{r(D,F,false,G)}};var r=function(G,E,K,I){if(!K){if(typeof E.defaultText!=="undefined"){G=E.defaultText}}if(I==="translate"){if(K||(!K&&!e.isKeepContent()&&typeof x.translateKeepContent==="undefined")){o.empty().append(E.preText+G+E.postText)}var H=e.isPostCompilingEnabled();var F=typeof h.translateCompile!=="undefined";var J=F&&h.translateCompile!=="false";if((H&&!F)||J){c(o.contents())(E)}}else{var D=x.$attr[I];if(D.substr(0,5)==="data-"){D=D.substr(5)}D=D.substr(15);o.attr(D,G)}};if(j||g||x.translateDefault){B.$watch("interpolateParams",y,true)}B.$on("translateLanguageChanged",y);var A=b.$on("$translateChangeSuccess",y);if(o.text().length){if(x.translate){C(x.translate)}else{C("")}}else{if(x.translate){C(x.translate)}}y();B.$on("$destroy",A)}}}}function getTranslateNamespace(a){if(a.translateNamespace){return a.translateNamespace}if(a.$parent){return getTranslateNamespace(a.$parent)}}translateDirective.displayName="translateDirective";